async function m(e){try{const o=await fetch("jsonYamlTool.html");if(!o.ok)throw new Error(`Failed to load JSON-YAML tool HTML: ${o.status}`);const t=await o.text();if(console.log("JSON-YAML HTML loaded, length:",t.length,"first 100 chars:",t.substring(0,100)),t.includes("<!DOCTYPE html")||t.includes("<html"))throw new Error("Invalid HTML content - contains full page structure");e.innerHTML=t}catch(o){console.error("Error loading JSON-YAML tool:",o),e.innerHTML='<div class="error">Failed to load JSON-YAML tool</div>';return}}function h(e){try{return window.jsyaml.load(e,{schema:window.jsyaml.DEFAULT_SCHEMA,json:!0})}catch(o){throw new Error(`YAML parsing error: ${o.message}`)}}function g(e,o=!1){try{const t=JSON.parse(e);return window.jsyaml.dump(t,{indent:2,lineWidth:-1,quotingType:o?'"':null,forceQuotes:o})}catch(t){throw new Error(`JSON parsing error: ${t.message}`)}}function y(e){try{return JSON.parse(e),!0}catch{return!1}}function w(e){try{return window.jsyaml.load(e),!0}catch{return!1}}function f(){const e=document.getElementById("json-yaml-input"),o=document.getElementById("json-yaml-output"),t=document.getElementById("json-yaml-status"),r=document.getElementById("force-quotes-checkbox"),s=document.getElementById("to-yaml"),a=document.getElementById("to-json"),l=document.getElementById("json-yaml-clear-btn");function i(){return r&&r.checked}s&&e&&o&&t&&(s.onclick=()=>{try{if(!e.value.trim())throw new Error("Input is empty");if(!y(e.value))throw new Error("Invalid JSON");const n=g(e.value,i());if(!n)throw new Error("Could not convert JSON to YAML");o.value=n,t.className="success-message",t.textContent="Converted to YAML",t.classList.remove("hidden")}catch(n){o.value="",t.className="error-message",t.textContent=n.message||"Error converting to YAML",t.classList.remove("hidden")}}),a&&e&&o&&t&&(a.onclick=()=>{try{if(!e.value.trim())throw new Error("Input is empty");if(!w(e.value))throw new Error("Invalid YAML");const n=h(e.value);if(!n)throw new Error("Could not convert YAML to JSON");o.value=JSON.stringify(n,null,2),t.className="success-message",t.textContent="Converted to JSON",t.classList.remove("hidden")}catch(n){o.value="",t.className="error-message",t.textContent=n.message||"Error converting to JSON",t.classList.remove("hidden")}}),l&&e&&o&&t&&(l.onclick=()=>{e.value="",o.value="",t.classList.add("hidden")}),document.querySelectorAll(".copy-btn").forEach(n=>{n.onclick=function(){const u=n.getAttribute("data-target"),c=document.getElementById(u);c&&navigator.clipboard.writeText(c.value).then(()=>{const d=n.textContent;n.textContent="Copied!",setTimeout(()=>{n.textContent=d},1e3)})}})}async function v(e,o){await m(e),f()}export{v as load,m as loadJSONYAMLTool};
