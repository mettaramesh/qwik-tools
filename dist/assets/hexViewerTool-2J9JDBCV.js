async function g(n){ensureHexViewerToolStyle();const t=await fetch("src/hexViewerTool.html").then(o=>o.text());n.innerHTML=t,y()}function y(){const n=document.getElementById("hexInput"),t=document.getElementById("hexOutput"),o=document.getElementsByName("hexViewMode"),u=document.getElementById("hexCopyBtn"),p=document.getElementById("hexClearBtn"),f=document.getElementById("hexShowBtn");function m(e){return e.toString(16).padStart(2,"0").toUpperCase()}function s(e,a){if(!e){t.innerHTML="";return}if(a==="hex"){let l="";for(const i of e){const h=new TextEncoder().encode(i),x=Array.from(h).map(m).join(" ");l+=`<span class="hexcode" data-char="${r(i)}" title="${r(i)}">${x}</span> `}t.innerHTML=l.trim()}else{let l="";for(const i of e){const h=i.codePointAt(0);l+=`<span class="codepoint" data-char="${r(i)}">U+${h.toString(16).toUpperCase().padStart(4,"0")}</span> `}t.innerHTML=l.trim()}}function r(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(){var e;return((e=Array.from(o).find(a=>a.checked))==null?void 0:e.value)||"hex"}f&&f.addEventListener("click",()=>s(n.value,d())),o&&o.length&&o.forEach(e=>{e&&e.addEventListener("change",()=>s(n.value,d()))}),t&&(t.addEventListener("mouseover",e=>{if(e.target.classList.contains("hexcode")||e.target.classList.contains("codepoint")){const a=e.target.getAttribute("data-char");w(e.target,a)}}),t.addEventListener("mouseout",e=>{(e.target.classList.contains("hexcode")||e.target.classList.contains("codepoint"))&&v()})),u&&t&&u.addEventListener("click",()=>{const e=t.textContent||"";e&&navigator.clipboard.writeText(e)}),p&&t&&n&&p.addEventListener("click",()=>{t.innerHTML="",n.value=""}),s(n.value,d())}let c;function w(n,t){c||(c=document.createElement("div"),c.className="hex-tooltip",document.body.appendChild(c)),c.textContent=t;const o=n.getBoundingClientRect();c.style.display="block",c.style.left=o.left+window.scrollX+o.width/2-12+"px",c.style.top=o.top+window.scrollY-36+"px"}function v(){c&&(c.style.display="none")}function E(n){if(!document.getElementById("hexviewer-css-link")){const t=document.createElement("link");t.id="hexviewer-css-link",t.rel="stylesheet",t.href="hexViewerTool.css",document.head.appendChild(t)}g(n)}export{E as load,g as loadHexViewerTool,y as setupHexViewerTool};
