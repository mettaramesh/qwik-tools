async function y(n){const t=await fetch("markdownPreview.html").then(a=>a.text());n.innerHTML=t,typeof p=="function"&&p()}function p(){const n=document.getElementById("md-input"),t=document.getElementById("md-output"),a=document.getElementById("md-preview-btn"),m=document.getElementById("md-clear-btn"),r=document.getElementById("md-error");function l(e){r.textContent=e,r.classList.remove("hidden")}function s(){r.textContent="",r.classList.add("hidden")}function d(e){if(window.marked)return e();const o=document.createElement("script");o.src="/public/marked.min.js",o.onload=e,document.head.appendChild(o)}function u(){t&&t.querySelectorAll("img").forEach(e=>{e.style.maxWidth="200px",e.style.maxHeight="200px",e.style.width="auto",e.style.height="auto",e.style.objectFit="contain",e.style.display="block",e.style.margin="1em auto"})}n.addEventListener("input",()=>{d(()=>{try{const e=window.marked.parse(n.value||"");t.innerHTML=e,u()}catch(e){l("Markdown parse error: "+e.message)}})}),a.onclick=()=>{s(),d(()=>{try{const e=window.marked.parse(n.value||"");t.innerHTML=e,u()}catch(e){l("Markdown parse error: "+e.message)}})},m.onclick=()=>{n.value="",t.innerHTML="",s()},document.querySelectorAll(".copy-btn").forEach(e=>{e.onclick=()=>{const o=e.getAttribute("data-target"),c=document.getElementById(o);c&&(c.tagName==="TEXTAREA"?navigator.clipboard.writeText(c.value).then(()=>{console.log("Text copied to clipboard successfully!")}).catch(i=>{console.error("Failed to copy text: ",i)}):navigator.clipboard.writeText(c.innerText).then(()=>{console.log("Text copied to clipboard successfully!")}).catch(i=>{console.error("Failed to copy text: ",i)}))}}),typeof window.setupCopyButtons=="function"&&window.setupCopyButtons()}export{y as load,p as setup};
