function h(o){try{return window.jsyaml.load(o,{schema:window.jsyaml.DEFAULT_SCHEMA,json:!0})}catch(a){throw new Error("YAML → JSON parse error: "+a.message)}}function w(o,a=!1){try{let r=o;return typeof r=="string"&&(r=JSON.parse(r)),window.jsyaml.dump(r,{schema:window.jsyaml.DEFAULT_SCHEMA,lineWidth:80,noRefs:!1,quotingType:'"',forceQuotes:a})}catch(r){throw new Error("JSON → YAML dump error: "+r.message)}}function g(o){try{return JSON.parse(o),!0}catch{return!1}}function v(o){try{return window.jsyaml.load(o),!0}catch{return!1}}async function E(o){const r=await(await fetch("jsonYamlTool.html")).text();o.innerHTML=r,setTimeout(()=>{const n=document.getElementById("json-yaml-input"),s=document.getElementById("json-yaml-output"),t=document.getElementById("json-yaml-status"),c=document.getElementById("force-quotes-checkbox"),l=document.getElementById("to-yaml"),i=document.getElementById("to-json"),u=document.getElementById("json-yaml-clear-btn");function d(){return c&&c.checked}l&&n&&s&&t&&(l.onclick=()=>{try{if(!n.value.trim())throw new Error("Input is empty");if(!g(n.value))throw new Error("Invalid JSON");const e=w(n.value,d());if(!e)throw new Error("Could not convert JSON to YAML");s.value=e,t.className="success-message",t.textContent="Converted to YAML",t.classList.remove("hidden")}catch(e){s.value="",t.className="error-message",t.textContent=e.message||"Error converting to YAML",t.classList.remove("hidden")}}),i&&n&&s&&t&&(i.onclick=()=>{try{if(!n.value.trim())throw new Error("Input is empty");if(!v(n.value))throw new Error("Invalid YAML");const e=h(n.value);s.value=JSON.stringify(e,null,2),t.className="success-message",t.textContent="Converted to JSON",t.classList.remove("hidden")}catch(e){s.value="",t.className="error-message",t.textContent=e.message||"Error converting to JSON",t.classList.remove("hidden")}}),u&&n&&s&&t&&(u.onclick=()=>{n.value="",s.value="",t.classList.add("hidden")}),document.querySelectorAll(".copy-btn").forEach(e=>{e.onclick=function(){const y=e.getAttribute("data-target"),m=document.getElementById(y);m&&navigator.clipboard.writeText(m.value).then(()=>{const f=e.textContent;e.textContent="Copied!",setTimeout(()=>{e.textContent=f},1e3)})}})},0)}async function p(o,a){await E(o)}export{p as load,E as loadJSONYamlTool};
