<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Qwik - Developer Tools</title>
    <link rel="stylesheet" href="./main-content.css" />
    <link rel="stylesheet" href="./ui-components.css" />
    <link rel="stylesheet" href="./sidebar.css" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />

    <!-- Inline CSS to stabilize logo rendering only -->
    <style>
      .header { display:flex; align-items:center; justify-content:space-between; padding:12px 16px; }
      .header-left { display:flex; align-items:center; gap:16px; }
      .logo { display:flex; align-items:center; gap:12px; height:64px; min-width:220px; padding:0 6px; }
      .brand {
        display:inline-flex;
        align-items:center;
        gap:0;
        text-decoration:none;
        color:#222;
        background: rgba(255,255,255,0.92);
        border-radius:12px;
        padding:0 14px;
        height:48px;
        line-height:48px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      }
      .brand .glassy-q {
        width:32px; height:32px; display:block; flex:0 0 32px;
        filter: drop-shadow(0 1px 6px rgba(25,118,210,0.18));
        margin-right:2px;
      }
      .brand-text {
        font-size:1.25rem;
        font-weight:700;
        font-family: Orbitron, Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        margin-left:0;
        display:inline-block;
        letter-spacing:0.01em;
        color:#1976d2;
        text-shadow: 0 1px 4px rgba(25,118,210,0.10);
      }
      .brand-text .q-rest {
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        font-weight:600;
        color:#222;
        margin-left:2px;
        font-size:1.15rem;
        letter-spacing:0.01em;
      }
      @media (max-width:600px) {
        .logo { min-width:120px; height:36px; }
        .brand { padding:0 4px; height:28px; }
        .brand .glassy-q { width:18px; height:18px; }
        .brand-text { font-size:0.8rem; }
        .brand-text .q-rest { font-size:0.7rem; }
      }
    </style>
</head>
<body>
<div class="app-container">
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <div class="logo" role="banner" aria-label="Qwik Tools logo">
              <a class="brand" href="/" title="Qwik-Tools home">
                <svg class="glassy-q" viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                  <defs>
                    <linearGradient id="glassQ" x1="0" x2="1" y1="0" y2="1">
                      <stop offset="0%" stop-color="#e3f0ff"/>
                      <stop offset="100%" stop-color="#1976d2"/>
                    </linearGradient>
                    <radialGradient id="glassQlight" cx="0.3" cy="0.3" r="0.8">
                      <stop offset="0%" stop-color="#fff" stop-opacity="0.7"/>
                      <stop offset="100%" stop-color="#1976d2" stop-opacity="0.2"/>
                    </radialGradient>
                  </defs>
                  <circle cx="48" cy="48" r="40" fill="url(#glassQ)" stroke="#fff" stroke-width="3"/>
                  <ellipse cx="48" cy="48" rx="28" ry="28" fill="url(#glassQlight)"/>
                  <path d="M48 24a24 24 0 1 1-12 44" fill="none" stroke="#fff" stroke-width="7" stroke-linecap="round"/>
                  <rect x="60" y="68" width="16" height="7" rx="3.5" fill="#fff" opacity="0.7" transform="rotate(25 68 71.5)"/>
                </svg>
                <span class="brand-text"><span class="q-rest">wik-Tools</span></span>
              </a>
            </div>
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Search tools..." class="search-input" aria-label="Search tools">
                <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                    <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2"/>
                </svg>
            </div>
        </div>
        <div class="header-right">
            <button id="why-qwik-header" class="why-qwik-btn" style="font-weight:bold;color:#1976d2;background:none;border:none;cursor:pointer;margin:0 8px;">Why Qwik-tools</button>
        </div>
    </header>

    <div class="main-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="nav-menu">
                <!-- Keep all original nav categories intact -->
                <!-- Favourites -->
                <div class="nav-category nav-favourites">
                    <div class="category-header" style="cursor:default;">
                        <svg class="category-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" stroke="currentColor" stroke-width="2" fill="currentColor"/>
                        </svg>
                        <span>Favourites</span>
                    </div>
                    <div class="category-items expanded" id="favourites-list"></div>
                </div>

              <div class="nav-category">
                        <div class="category-header" data-category="converters">
                            <svg class="category-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7 16L17 16M17 16L13 12M17 16L13 20M17 8L7 8M7 8L11 4M7 8L11 12" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span>Converters</span>
                            <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="category-items">
                            <a href="#json-yaml" class="nav-item" data-tool="json-yaml"><span class="tool-label">JSON ↔ YAML</span></a>
                            <a href="#json-xml" class="nav-item" data-tool="json-xml"><span class="tool-label">JSON ↔ XML</span></a>
                            <a href="#timestamp" class="nav-item" data-tool="timestamp"><span class="tool-label">Timestamp Converter</span></a>
                            <a href="#number-base" class="nav-item" data-tool="number-base"><span class="tool-label">Base Calculator</span></a>
                            <a href="#cron-parser" class="nav-item" data-tool="cron-parser"><span class="tool-label">CRON Parser</span></a>
                            <a href="#charset-converter" class="nav-item" data-tool="charset-converter"><span class="tool-label">Charset Converter</span></a>
                            <a href="#hex-ascii-converter" class="nav-item" data-tool="hex-ascii-converter"><span class="tool-label">Hex-ASCII Converter</span></a>
                            <a href="#text-inspector" class="nav-item" data-tool="text-inspector"><span class="tool-label">Text Inspector</span></a>
                        </div>
                    </div>

                    <div class="nav-category">
                        <div class="category-header" data-category="encoders">
                            <svg class="category-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="2" y="3" width="20" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                                <line x1="8" y1="21" x2="16" y2="21" stroke="currentColor" stroke-width="2"/>
                                <line x1="12" y1="17" x2="12" y2="21" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span>Encoders / Decoders</span>
                            <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="category-items">
                            <a href="#jwt" class="nav-item" data-tool="jwt"><span class="tool-label">JWT</span></a>
                            <a href="#html" class="nav-item" data-tool="html"><span class="tool-label">HTML</span></a>
                            <a href="#url" class="nav-item" data-tool="url"><span class="tool-label">URL</span></a>
                            <a href="#base64-text" class="nav-item" data-tool="base64-text"><span class="tool-label">Base64 Text</span></a>
                            <a href="#base64-image" class="nav-item" data-tool="base64-image"><span class="tool-label">Base64 Image</span></a>
                            <a href="#gzip" class="nav-item" data-tool="gzip"><span class="tool-label">GZip</span></a>
                        </div>
                    </div>

                    <div class="nav-category">
                    <div class="category-header" data-category="formatters">
                        <svg class="category-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14 2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V8Z" stroke="currentColor" stroke-width="2"/>
                            <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2"/>
                            <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2"/>
                            <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2"/>
                            <polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>Formatters</span>
                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="category-items">
                        <a href="#json-formatter" class="nav-item active" data-tool="json-formatter"><span class="tool-label">JSON Formatter</span></a>
                        <a href="#sql-formatter" class="nav-item" data-tool="sql-formatter"><span class="tool-label">SQL Formatter</span></a>
                        <a href="#xml-formatter" class="nav-item" data-tool="xml-formatter"><span class="tool-label">XML Formatter</span></a>
                    </div>
                </div>

                <div class="nav-category">
                    <div class="category-header" data-category="generators">
                        <svg class="category-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                            <path d="M19.4 15A1.65 1.65 0 0 0 21 13.35V10.65A1.65 1.65 0 0 0 19.4 9L17.7 7.35A1.65 1.65 0 0 0 15.65 7H8.35A1.65 1.65 0 0 0 6.3 7.35L4.6 9A1.65 1.65 0 0 0 3 10.65V13.35A1.65 1.65 0 0 0 4.6 15L6.3 16.65A1.65 1.65 0 0 0 8.35 17H15.65A1.65 1.65 0 0 0 17.7 16.65Z" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>Generators</span>
                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="category-items">
                        <a href="#hash-generator" class="nav-item" data-tool="hash-generator"><span class="tool-label">Hash Generator</span></a>
                        <a href="#uuid-generator" class="nav-item" data-tool="uuid-generator"><span class="tool-label">UUID Generator</span></a>
                        <a href="#lorem-ipsum" class="nav-item" data-tool="lorem-ipsum"><span class="tool-label">Lorem Ipsum</span></a>
                        <a href="#qr-generator" class="nav-item" data-tool="qr-generator"><span class="tool-label">QR Code Generator</span></a>
                        <a href="#password-generator" class="nav-item" data-tool="password-generator"><span class="tool-label">Password Generator</span></a>
                    </div>
                </div>

                <div class="nav-category">
                    <div class="category-header" data-category="text">
                        <svg class="category-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <polyline points="4,7 4,4 20,4 20,7" stroke="currentColor" stroke-width="2"/>
                            <line x1="9" y1="20" x2="15" y2="20" stroke="currentColor" stroke-width="2"/>
                            <line x1="12" y1="4" x2="12" y2="20" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>Text Tools</span>
                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="category-items">
                        <a href="#regex-tester" class="nav-item" data-tool="regex-tester"><span class="tool-label">Regex Tester</span></a>
                        <a href="#text-comparer" class="nav-item" data-tool="text-comparer"><span class="tool-label">Text Comparer</span></a>
                        <a href="#xml-validator" class="nav-item" data-tool="xml-validator"><span class="tool-label">XML Validator</span></a>
                        <a href="#json-validator" class="nav-item" data-tool="json-validator"><span class="tool-label">JSON Validator</span></a>
                        <a href="#markdown-preview" class="nav-item" data-tool="markdown-preview"><span class="tool-label">Markdown Preview</span></a>
                        <a href="#hex-viewer" class="nav-item" data-tool="hex-viewer"><span class="tool-label">Hex Viewer</span></a>
                    </div>
                </div>

                <div class="nav-category">
                    <div class="category-header" data-category="graphic">
                        <svg class="category-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5" stroke="currentColor" stroke-width="2"/>
                            <polyline points="21,15 16,10 5,21" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>Graphic Tools</span>
                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="category-items">
                        <a href="#color-blindness" class="nav-item" data-tool="color-blindness"><span class="tool-label">Color Blindness Simulator</span></a>
                        <a href="#color-picker" class="nav-item" data-tool="color-picker"><span class="tool-label">Color Picker & Contrast</span></a>
                        <a href="#image-compressor" class="nav-item" data-tool="image-compressor"><span class="tool-label">PNG/JPEG Compressor</span></a>
                        <a href="#image-converter" class="nav-item" data-tool="image-converter"><span class="tool-label">Image Converter</span></a>
                    </div>
                </div>

                <div class="nav-category">
                    <div class="category-header" data-category="networking">
                        <svg class="category-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="7" width="18" height="10" rx="2" stroke="currentColor" stroke-width="2"/>
                            <circle cx="7" cy="12" r="1.5" stroke="currentColor" stroke-width="2"/>
                            <circle cx="12" cy="12" r="1.5" stroke="currentColor" stroke-width="2"/>
                            <circle cx="17" cy="12" r="1.5" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>Networking</span>
                        <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="category-items">
                        <a href="#subnet-calculator" class="nav-item" data-tool="subnet-calculator"><span class="tool-label">Subnet Calculator</span></a>
                        <a href="#vlsm-calculator" class="nav-item" data-tool="vlsm-calculator"><span class="tool-label">VLSM Calculator</span></a>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
           <div id="tool-content" class="tool-container">
                    <!-- JSON Formatter Tool (Default) -->
                    <div class="tool-header">
                        <h2>JSON Formatter</h2>
                        <p>Format, beautify, and minify JSON data</p>
                    </div>
                    
                    <div class="tool-interface">
                        <div class="tool-controls">
                            <button class="btn btn--secondary" id="format-btn" aria-label="Format JSON">Format</button>
                            <button class="btn btn--outline" id="minify-btn" aria-label="Minify JSON">Minify</button>
                            <button class="btn btn--outline" id="validate-btn" aria-label="Validate JSON">Validate</button>
                            <button class="btn btn--outline" id="clear-btn" aria-label="Clear JSON">Clear</button>
                        </div>
                        
                        <div class="io-container">
                            <div class="input-section">
                                <div class="section-header">
                                    <label class="form-label">Input JSON</label>
                                    <button class="btn btn--sm copy-btn" data-target="json-input">Copy</button>
                                </div>
                                <textarea id="json-input" class="form-control code-input" placeholder="Paste or type your JSON here..." rows="12" aria-label="Input JSON"></textarea>
                            </div>
                            
                            <div class="output-section">
                                <div class="section-header">
                                    <label class="form-label">Formatted Output</label>
                                    <button class="btn btn--sm copy-btn" data-target="json-output">Copy</button>
                                </div>
                                <textarea id="json-output" class="form-control code-input" readonly rows="12" aria-label="Formatted Output"></textarea>
                            </div>
                        </div>
                        
                        <div id="json-error" class="error-message hidden"></div>
                    </div>
                </div>
           <!-- Subnet Calculator tool will be rendered dynamically by its module -->
        </main>
    </div>
</div>

<script type="module" src="./src/main.js"></script>
<script src="/js-yaml.min.js"></script>
<script src="/xmllint.js"></script>

<!-- Clipboard Consent Modal -->
<div id="clipboard-consent-modal" class="modal hidden" style="display:none;position:fixed;z-index:1000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);align-items:center;justify-content:center;">
  <div style="background:#fff;padding:2em 2.5em;border-radius:10px;max-width:400px;margin:auto;box-shadow:0 4px 32px 0 rgba(0,0,0,0.18);text-align:center;">
    <h3 style="margin-top:0;">Clipboard Access</h3>
    <p>This app can use your clipboard for copy/paste features. No data is sent anywhere.</p>
    <button id="clipboard-consent-accept" class="btn btn--secondary" style="margin:0 8px;">Allow</button>
    <button id="clipboard-consent-deny" class="btn btn--outline" style="margin:0 8px;">Deny</button>
  </div>
</div>

<!-- JS for sidebar toggle -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.nav-category').forEach(cat => {
        const header = cat.querySelector('.category-header');
        const items = cat.querySelector('.category-items');

        if (!cat.classList.contains('nav-favourites')) {
            items.classList.remove('expanded'); // collapse everything except favourites
        }

        header.addEventListener('click', () => {
            items.classList.toggle('expanded');
            const chevron = header.querySelector('.chevron');
            if (chevron) chevron.classList.toggle('rotate');
        });
    });

    // Live search for tools (restored robust logic)
    const searchInput = document.getElementById('search-input');
    if (searchInput) {
      searchInput.addEventListener('input', function() {
        const q = this.value.trim().toLowerCase();
        document.querySelectorAll('.nav-category').forEach(navCategory => {
          if (navCategory.classList.contains('nav-favourites')) return;
          const items = navCategory.querySelector('.category-items');
          let hasVisible = false;
          items.querySelectorAll('.nav-item').forEach(link => {
            const text = link.textContent.trim().toLowerCase();
            if (!q || text.includes(q)) {
              link.style.display = '';
              hasVisible = true;
            } else {
              link.style.display = 'none';
            }
          });
          if (q) {
            if (hasVisible) {
              navCategory.style.display = '';
              items.classList.add('expanded');
              items.style.display = '';
            } else {
              navCategory.style.display = 'none';
            }
          } else {
            navCategory.style.display = '';
            items.style.display = '';
            items.classList.remove('expanded');
            items.querySelectorAll('.nav-item').forEach(link => link.style.display = '');
          }
        });
      });
    }
});
</script>

</body>
</html>
